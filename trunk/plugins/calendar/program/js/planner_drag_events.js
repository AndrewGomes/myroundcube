function planner_drag_events(){var e=$("#planner_items"),c=$("#calendar_button");$("li.drag_datetime",e).draggable({cancel:"a.ui-icon",revert:"invalid",containment:"window",scroll:!1,helper:"clone",cursor:"move",appendTo:"#planner_drag_list",zIndex:999999});c.droppable({accept:"#planner_items_list > li.drag_datetime",activeClass:"ui-state-highlight",tolerance:"touch",drop:function(e,d){planner_overlay_toggle(!0);var a=d.draggable.find(".datetime").text(),b=a;25<=b.length&&(b=b.substr(0,22)+"...");
var c=d.draggable.find(".drag_id").val(),f=d.draggable.find(".datetime").prev().prev().val();rcmail.http_post("plugin.newEvent","_summary="+b+"&_description="+a+"&_color=default&_planner_datetime="+f+"&_id="+c);$("#overlay").show();$("#planner_help").hide();parent.tabbed&&(parent.getIFRAMEDiv("dummy:plugin.calendar"),a=parent.rcmail.env.tabbed_target.replace("#tabbed_","#tabbed_frame_"),parent.$(a).attr("src","./?_task=dummy&_action=plugin.calendar&_s="+(new Date).getTime()))}})};